import{i as p,_ as v,d as y,r as F,o as N,c as U,a as f,b as l,w as a,F as L,e as d}from"./index-2b228d4a.js";import{c as W,E as r,a as _,b as $,d as z}from"./el-table-column-37b5773d.js";import{b as I,E as P,a as S,c as B}from"./el-button-b0706634.js";import{E as O}from"./el-input-number-238debe8.js";import{E as D,a as T,b as A}from"./el-select-84ceac95.js";/* empty css                   */function M(e){return p({url:`/api/subject/one?id=${e}`,method:"get"})}function q(e){return p({url:"/api/subject/edit",method:"post",data:e})}function G(e){return p({url:"/api/subject/edit",method:"post",data:e})}function H(e){return p({url:"/api/subject/page",method:"post",data:e})}const J=y({data(){return{subjects:[],page:{total:0,current:1,size:10},dialogFormVisible:!1,searchNo:"",subject:{id:0,name:"",finished:0},formLabelWidth:80}},mounted(){this.getSubjectsPage(1)},methods:{search(){if(this.searchNo==""){alert("请输入后进行查询");return}M(this.searchNo).then(e=>{console.log(e),this.subjects=[],this.subjects.push(e.data.subject)}).catch(e=>{console.log(e)})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.subject=W(e)},getSubjectsPage(e){H({current:e,size:10,colums:[]}).then(m=>{console.log(m);const b=m.data.page;this.subjects=b.records,this.page=b}).catch(m=>{console.log(m)})},currentchange(e){this.getSubjectsPage(e),this.page.current=e},toAdd(){this.dialogFormVisible=!0,this.subject={id:0,name:"",finished:0}},save(){const e=this.subject;e.id==0?(q(e).then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectsPage(this.page.current),r(t.msg);else return r(t.msg),!1}),G.catch(t=>{r("网络错误联系管理员")})):e.then(t=>{if(t.success)this.dialogFormVisible=!1,this.getSubjectPage(this.page.current),r(t.msg);else return r(t.msg),!1}).catch(t=>{r("添加成功")})}}}),K={style:{width:"80%",margin:"0 auto"}},Q={class:"dialog-footer"};function R(e,t,m,b,X,Y){const c=F("router-link"),n=S,i=I,u=P,s=z,g=_,V=D,h=T,j=A,w=O,C=B,E=$;return N(),U(L,null,[f("div",null,[f("div",K,[l(c,{to:"/index"},{default:a(()=>[d("首页")]),_:1}),l(i,{label:"科研","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:a(()=>[l(n,{modelValue:e.searchNo,"onUpdate:modelValue":t[0]||(t[0]=o=>e.searchNo=o),placeholder:"请输入对应科研ID"},null,8,["modelValue"])]),_:1}),l(u,{type:"primary",onClick:e.search},{default:a(()=>[d("查询")]),_:1},8,["onClick"]),l(u,{type:"success",onClick:e.toAdd},{default:a(()=>[d("添加")]),_:1},8,["onClick"])]),l(g,{data:e.subjects,style:{width:"80%",margin:"0 auto"}},{default:a(()=>[l(s,{prop:"id",label:"编号",width:"150"}),l(s,{prop:"subjectNo",label:"课程编号",width:"150"}),l(s,{prop:"name",label:"课题名称",width:"120"}),l(s,{prop:"origin",label:"课题来源",width:"120"}),l(s,{prop:"userId",label:"负责人",width:"120"}),l(s,{prop:"participant",label:"参与者",width:"120"}),l(s,{prop:"fee",label:"课题费用",width:"120"}),l(s,{prop:"level",label:"课题等级",width:"120"}),l(s,{prop:"period",label:"课题周期",width:"120"}),l(s,{fixed:"right",label:"操作",width:"120"},{default:a(o=>[l(u,{link:"",type:"primary",size:"small",onClick:k=>e.toEdit(o.row)},{default:a(()=>[d("更新")]),_:2},1032,["onClick"]),l(u,{link:"",type:"primary",size:"small",onClick:k=>e.del(o.row.id)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(E,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[11]||(t[11]=o=>e.dialogFormVisible=o),title:"项目编辑"},{footer:a(()=>[f("span",Q,[l(u,{onClick:t[10]||(t[10]=o=>e.dialogFormVisible=!1)},{default:a(()=>[d("取消")]),_:1}),l(u,{type:"primary",onClick:e.save},{default:a(()=>[d("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[l(C,{model:e.subject},{default:a(()=>[l(i,{label:"课程编号","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.subjectNo,"onUpdate:modelValue":t[1]||(t[1]=o=>e.subject.subjectNo=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程等级","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.level,"onUpdate:modelValue":t[2]||(t[2]=o=>e.subject.level=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程周期","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.period,"onUpdate:modelValue":t[3]||(t[3]=o=>e.subject.period=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"负责人","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.userId,"onUpdate:modelValue":t[4]||(t[4]=o=>e.subject.userId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"参与者","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.participant,"onUpdate:modelValue":t[5]||(t[5]=o=>e.subject.participant=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程来源","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.origin,"onUpdate:modelValue":t[6]||(t[6]=o=>e.subject.origin=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程名称","label-width":e.formLabelWidth},{default:a(()=>[l(n,{modelValue:e.subject.name,"onUpdate:modelValue":t[7]||(t[7]=o=>e.subject.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"是否结项","label-width":e.formLabelWidth},{default:a(()=>[l(j,{modelValue:e.subject.finished,"onUpdate:modelValue":t[8]||(t[8]=o=>e.subject.finished=o),placeholder:"请选择"},{default:a(()=>[l(h,{label:"否",value:0}),l(h,{label:"是",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(i,{label:"课程费用","label-width":e.formLabelWidth},{default:a(()=>[l(w,{modelValue:e.subject.fee,"onUpdate:modelValue":t[9]||(t[9]=o=>e.subject.fee=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ae=v(J,[["render",R]]);export{ae as default};
