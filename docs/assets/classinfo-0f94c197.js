import{i as c,_ as k,d as E,r as y,o as F,c as v,a as f,b as l,w as a,F as P,e as i,t as z}from"./index-2b228d4a.js";import{c as U,E as u,a as $,b as D,d as L}from"./el-table-column-37b5773d.js";import{b as W,E as j,a as I,c as q}from"./el-button-b0706634.js";import{E as B,a as A,b as N}from"./el-select-84ceac95.js";/* empty css                   */const T=e=>c({url:"/api/classinfo/one/"+e,method:"get"}),S=e=>c.request({url:"api/classinfo/add",method:"post",data:e}),M=e=>c.request({url:"api/classinfo/page",method:"post",data:e}),O=e=>c.request({url:"api/classinfo/edit",method:"post",data:e}),G=e=>c.request({url:"api/classinfo/delete",params:e}),H=E({data(){return{input:"",classinfos:[],page:{total:0,current:1,size:10},searchid:"",dialogFormVisible:!1,classinfo:{id:0,name:"",major:"",depart:"",school:"",state:1},formLabelWidth:80}},mounted(){this.getclassinfosPage(1)},methods:{research(){this.searchid="",this.getclassinfosPage(1)},search(){if(this.searchid==""){alert("请输入班级ID后查询");return}T(this.searchid).then(e=>{console.log(e),this.classinfos=[],this.classinfos.push(e.data.classinfo)}).catch(e=>{console.log(e)})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.classinfo=U(e)},getclassinfosPage(e){M({current:e,size:10}).then(t=>{console.log(t),this.classinfos=t.data.page.records,console.log(this.classinfos)}).catch(t=>{console.log(t)})},currentchange(e){this.getclassinfosPage(e),this.page.current=e},del(e){confirm("是否删除")==!0&&console.log(e),console.log(e),G({id:e}).then(t=>{if(t.success)this.getclassinfoPage(this.page.current);else return console.log(t.msg),!1}).catch(t=>{})},toAdd(){this.dialogFormVisible=!0,this.classinfo={id:0,name:"",major:"",depart:"",school:"",state:1}},save(){const e=this.classinfo;e.id==0?S(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getclassinfosPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("网络错误联系管理员")}):O(e).then(o=>{if(o.success)this.dialogFormVisible=!1,this.getclassinfoPage(this.page.current),u(o.msg);else return u(o.msg),!1}).catch(o=>{u("添加成功")})}}}),J={style:{width:"80%",margin:"0 auto"}},K={class:"dialog-footer"};function Q(e,o,t,R,X,Y){const h=y("router-link"),m=I,d=W,n=j,r=L,g=$,b=B,p=A,V=N,w=q,C=D;return F(),v(P,null,[f("div",null,[f("div",J,[l(h,{to:"/index"},{default:a(()=>[i("首页")]),_:1}),l(d,{label:"班级","label-width":80,style:{display:"inline-flex","margin-right":"10px"}},{default:a(()=>[l(m,{modelValue:e.searchid,"onUpdate:modelValue":o[0]||(o[0]=s=>e.searchid=s),placeholder:"请输入班级ID"},null,8,["modelValue"])]),_:1}),l(n,{type:"primary",onClick:e.search},{default:a(()=>[i("查询")]),_:1},8,["onClick"]),l(n,{type:"warning",onClick:e.research},{default:a(()=>[i("重置")]),_:1},8,["onClick"]),l(n,{type:"success",onClick:e.toAdd},{default:a(()=>[i("添加")]),_:1},8,["onClick"])]),l(g,{data:e.classinfos,style:{width:"80%",margin:"0 auto"}},{default:a(()=>[l(r,{prop:"id",label:"班级编号",width:"150"}),l(r,{prop:"name",label:"班级名称",width:"120"}),l(r,{prop:"major",label:"专业",width:"120"}),l(r,{prop:"depart",label:"学院",width:"120"}),l(r,{prop:"school",label:"学校",width:"120"}),l(r,{label:"状态",width:"120"},{default:a(s=>[i(z(s.row.state==0?"未启用":"启用"),1)]),_:1}),l(r,{fixed:"right",label:"功能管理",width:"120"},{default:a(s=>[l(n,{link:"",type:"primary",size:"small",onClick:_=>e.toEdit(s.row)},{default:a(()=>[i("更新")]),_:2},1032,["onClick"]),l(n,{link:"",type:"primary",size:"small",onClick:_=>e.del(s.row.id)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(b,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(C,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[7]||(o[7]=s=>e.dialogFormVisible=s),title:"班级编辑"},{footer:a(()=>[f("span",K,[l(n,{onClick:o[6]||(o[6]=s=>e.dialogFormVisible=!1)},{default:a(()=>[i("取消")]),_:1}),l(n,{type:"primary",onClick:e.save},{default:a(()=>[i("保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[l(w,{model:e.classinfo},{default:a(()=>[l(d,{label:"班级名称","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.classinfo.name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.classinfo.name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"专业","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.classinfo.major,"onUpdate:modelValue":o[2]||(o[2]=s=>e.classinfo.major=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学院","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.classinfo.depart,"onUpdate:modelValue":o[3]||(o[3]=s=>e.classinfo.depart=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"学校","label-width":e.formLabelWidth},{default:a(()=>[l(m,{modelValue:e.classinfo.school,"onUpdate:modelValue":o[4]||(o[4]=s=>e.classinfo.school=s),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(d,{label:"状态","label-width":e.formLabelWidth},{default:a(()=>[l(V,{modelValue:e.classinfo.state,"onUpdate:modelValue":o[5]||(o[5]=s=>e.classinfo.state=s),placeholder:"请选择"},{default:a(()=>[l(p,{label:"启用",value:1}),l(p,{label:"未启用",value:0})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ae=k(H,[["render",Q]]);export{ae as default};
